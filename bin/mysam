#!/usr/bin/env node

var path = require('path');
var program = require('commander');
var pkg = require(path.join(__dirname, '..', 'package.json'));
var express = require('express');

program.version(pkg.version)
  .usage('[options]')
  .description(pkg.description)
  .option('-p, --port', 'The port to run on (default: 5050)')
  .option('-p --path', 'The folder to serve for plugin files (defaults to current folder)')
  .parse(process.argv);

var folder = program.path || process.cwd();
var port = program.port || 5050;
var app = express();

app.use(express.static(folder));
app.use(express.static(path.join(require.resolve('mysam-ui'), '..', '..')));

app.listen(port).once('listening', function () {
  console.log('MySam running at http://localhost:' + port);
});
